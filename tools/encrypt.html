<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
  <meta charset="utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="AES Encryption Tool by CyberAlex – encrypt and decrypt text in the browser with local-only processing for privacy and security.">
  <meta name="author" content="Alex">
  <meta name="robots" content="index, follow">

  <title>Encryption Tool – CyberAlex</title>

  <!-- Canonical URL -->
  <link rel="canonical" href="https://www.cyberalex.uk/tools/encrypt.html">

  <!-- Open Graph -->
  <meta property="og:title" content="Encryption Tool – CyberAlex">
  <meta property="og:description" content="Encrypt and decrypt text directly in your browser using AES, with all processing performed locally to keep your data private and secure.">
  <meta property="og:url" content="https://www.cyberalex.uk/tools/encrypt.html">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="CyberAlex">
  <meta property="og:image" content="https://www.cyberalex.uk/img/social-card.png">

  <!-- Twitter / X -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Encryption Tool – CyberAlex">
  <meta name="twitter:description" content="Browser-based AES encryption and decryption with local-only processing.">
  <meta name="twitter:image" content="https://www.cyberalex.uk/img/social-card.png">

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

  <!-- Custom styles -->
  <link rel="stylesheet" href="/css/main.css">

  <link rel="icon" href="/logo.png" type="image/png">
</head>

<body class="theme-dark">
  <!-- Skip link for accessibility -->
  <a class="skip-link" href="#main-content">Skip to main content</a>

  <!-- Header loaded via JS -->
  <header id="site-header" aria-label="Main site header"></header>

  <main id="main-content" class="container py-4" tabindex="-1">
    <!-- BREADCRUMBS + PAGE TITLE BLOCK -->
    <section class="mb-4" aria-label="Page header">
      <nav aria-label="Breadcrumb" class="mb-2">
        <ol class="breadcrumb small mb-0">
          <li class="breadcrumb-item"><a href="/">Home</a></li>
          <li class="breadcrumb-item"><a href="/projects.html">Tools &amp; Projects</a></li>
          <li class="breadcrumb-item active" aria-current="page">Client-Side File Encryption and Decryption Tool</li>
        </ol>
      </nav>

      <h1 class="h3 mb-1">Encryption Tool</h1>
      <p class="text-secondary small mb-0">
        By <a href="/about.html">Alex</a> &bull; Published: 6 November 2025 &bull; Updated: 6 November 2025
      </p>
    </section>

    <!-- HERO / SUMMARY ROW -->
    <section class="mb-4">
      <div class="row g-4 align-items-start">
        <div class="col-lg-7">
          <p class="lead mb-3">
            Client-Side File Encryption and Decryption Tool – A browser-based utility that applies modern AES-GCM encryption to your files using a password-derived key, with all cryptographic operations performed locally for maximum privacy.
          </p>
           <p class="small text-secondary">
        In the <strong>Encrypt</strong> tab above, choose a file, set a password, and click
        <em>Encrypt file</em>. The browser derives a key from your password, encrypts the file, and
        downloads a new file with the <code>.caenc</code> extension. Keep both the encrypted file and
        the password somewhere safe.
      </p>
      <p class="small text-secondary">
        In the <strong>Decrypt</strong> tab, select a previously encrypted <code>.caenc</code> file and
        enter the same password. If everything matches, the browser will download a decrypted copy.
        If the password is wrong or the file has been modified, decryption will fail.
      </p>
      <p class="small text-secondary mb-0">
        All of this happens locally in your browser. The file data and password are never sent to
        this site, a server, or any external service. Closing the page clears everything from
        memory apart from any copies you have saved to disk.
      </p>
        </div>
        <div class="col-lg-5">
          <div class="card h-100 card-raise">
            <div class="card-visual" aria-hidden="true">
              <img src="/img/card-encryption.png" alt="" loading="lazy">
            </div>
            <div class="card-body small text-secondary">
              <h2 class="h6 text-uppercase text-muted mb-2">At a Glance</h2>
              <ul class="small text-secondary mb-2">
        <li>Encrypts and decrypts files locally in your browser using a password-derived key.</li>
        <li>Uses AES-GCM with a random salt and IV for every encryption.</li>
        <li>The password never leaves your device; there is no server-side component.</li>
        <li>Designed as a simple, transparent helper for personal use and demonstrations.</li>
        <li>If you forget the password, there is no recovery path – the data is effectively lost.</li>
      </ul>
      <p class="small text-secondary mb-0">
        This tool is intentionally minimal. It does not try to be a full key management system or
        compete with professional products. Instead it shows, in a concrete way, how modern
        browser cryptography works and what “client-side only” actually means.
      </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="mb-5" aria-labelledby="file-crypto-heading">
  <h2 id="file-crypto-heading" class="h4 mb-3">Client-Side File Encryption</h2>
  <p class="small text-secondary mb-4">
    Encrypt and decrypt files locally in your browser using a password-derived key.
    Files and passwords never leave this device. If you forget the password, the data
    cannot be recovered.
  </p>

 <div class="card card-raise mb-3">
  <div class="card-body">
    <ul class="nav nav-tabs" id="fileCryptoTabs" role="tablist">
      <li class="nav-item" role="presentation">
        <button
          class="nav-link active"
          id="encrypt-tab-button"
          data-bs-toggle="tab"
          data-bs-target="#encrypt-tab"
          type="button"
          role="tab"
          aria-controls="encrypt-tab"
          aria-selected="true"
        >
          Encrypt
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button
          class="nav-link"
          id="decrypt-tab-button"
          data-bs-toggle="tab"
          data-bs-target="#decrypt-tab"
          type="button"
          role="tab"
          aria-controls="decrypt-tab"
          aria-selected="false"
        >
          Decrypt
        </button>
      </li>
    </ul>

    <div class="tab-content mt-3" id="fileCryptoTabContent">
      <!-- Encrypt tab -->
      <div
        class="tab-pane fade show active"
        id="encrypt-tab"
        role="tabpanel"
        aria-labelledby="encrypt-tab-button"
      >
        <form id="encrypt-form" novalidate>
          <div class="mb-3">
            <label for="encrypt-file" class="form-label">File to encrypt</label>
            <input type="file" id="encrypt-file" class="form-control" required>
          </div>

          <div class="mb-3">
            <label for="encrypt-password" class="form-label">Password</label>
            <input type="password" id="encrypt-password" class="form-control" autocomplete="new-password" required>
          </div>

          <div class="mb-3">
            <label for="encrypt-password-confirm" class="form-label">Confirm password</label>
            <input type="password" id="encrypt-password-confirm" class="form-control" autocomplete="new-password" required>
       <p class="small text-secondary mb-0">
        Choose a strong, unique passphrase. If you need help generating or checking one,
        you can use my <a href="/tools/password-tester.html">Password Generator &amp; Strength Tester</a>.
        Once set, the password cannot be recovered by anyone — including you — so keep it somewhere safe.
      </p>


          </div>

          <button type="submit" class="btn btn-primary btn-sm">Encrypt file</button>
          <p id="encrypt-status" class="small text-secondary mt-2" aria-live="polite"></p>
        </form>
      </div>

      <!-- Decrypt tab -->
      <div
        class="tab-pane fade"
        id="decrypt-tab"
        role="tabpanel"
        aria-labelledby="decrypt-tab-button"
      >
        <form id="decrypt-form" novalidate>
          <div class="mb-3">
            <label for="decrypt-file" class="form-label">Encrypted file (.caenc)</label>
            <input type="file" id="decrypt-file" class="form-control" required>
          </div>

          <div class="mb-3">
            <label for="decrypt-password" class="form-label">Password</label>
            <input type="password" id="decrypt-password" class="form-control" autocomplete="current-password" required>
          </div>

          <button type="submit" class="btn btn-primary btn-sm">Decrypt file</button>
          <p id="decrypt-status" class="small text-secondary mt-2" aria-live="polite"></p>
        </form>
      </div>
    </div>
  </div>
</div>


  <p class="fs-7 text-secondary">
    Cryptography details: AES-256-GCM with a key derived from your password using PBKDF2 (SHA-256)
    and a high iteration count. A random salt and IV are generated for every encryption. The encrypted
    file format is: <code>[salt (16 bytes)][iv (12 bytes)][ciphertext]</code>.
  </p>
</section>


    <!-- CONTEXT, THREAT MODEL, LIMITATIONS -->
    <section class="mb-5" aria-labelledby="context-heading">
      <h2 id="context-heading" class="h4 mb-3">Context, threat model and limitations</h2>
      <p class="small text-secondary">
        This tool sits in the “practical crypto” space: it shows how password-based encryption can
        be implemented with modern browser APIs, and it is suitable for small personal files or
        demonstrations where you want to keep data off a server. It is not a replacement for a
        full enterprise key management system, an audited product, or a structured backup process.
      </p>
      <p class="small text-secondary">
        The <strong>threat model</strong> assumed here is that your main risk is someone gaining
        access to a copy of the encrypted file – for example, through a lost USB stick or cloud
        account – and trying to decrypt it offline. Using a strong, unique passphrase makes that
        offline attack impractical. What this tool does <em>not</em> protect you from is a compromised
        device, malware with keylogging capabilities, or someone looking over your shoulder while
        you type the password.
      </p>
      <p class="small text-secondary">
        In short: if your device is already compromised, browser-based encryption cannot save you.
        Equally, if you choose a weak or reused password, you are giving an attacker a much easier
        job. Treat the password as seriously as you would for your primary email or password
        manager account.
      </p>
      <h3 class="h6 text-uppercase text-muted mt-4 mb-2">When this tool is a good fit</h3>
      <ul class="small text-secondary mb-2">
        <li>Encrypting a small number of personal files before storing them somewhere you don’t fully control.</li>
        <li>Demonstrating password-based encryption and decryption in teaching, workshops or talks.</li>
        <li>Testing how AES-GCM and password-derived keys behave in a zero-knowledge, browser-only setup.</li>
      </ul>
      <h3 class="h6 text-uppercase text-muted mt-3 mb-2">When you should look for something else</h3>
      <ul class="small text-secondary mb-0">
        <li>You need centralised key management, access control, or audit trails.</li>
        <li>You are handling highly regulated data with formal compliance requirements.</li>
        <li>You need multi-user sharing, automatic backups, or integration with other systems.</li>
      </ul>
    </section>

    <!-- CRYPTO DESIGN CHOICES -->
    <section class="mb-5" aria-labelledby="crypto-design-heading">
      <h2 id="crypto-design-heading" class="h4 mb-3">Cryptographic design choices</h2>
      <p class="small text-secondary">
        Under the hood, this page uses the <code>window.crypto.subtle</code> API provided by your
        browser. A random <strong>salt</strong> and <strong>initialisation vector (IV)</strong> are
        generated for every encryption. The password is turned into a key using PBKDF2 with SHA-256
        and a high iteration count, and that key is then used with AES-256-GCM to encrypt the file.
      </p>
      <p class="small text-secondary">
        The encrypted file format is deliberately simple:
        <code>[salt (16 bytes)][iv (12 bytes)][ciphertext]</code>.
        This makes it easier to explain, inspect, or port to another environment if you want to
        write a compatible decryptor in a different language.
      </p>
      <p class="small text-secondary mb-0">
        As with any small browser tool, this implementation relies on the security of your browser,
        operating system and hardware. Subtle cryptographic flaws or implementation bugs are beyond
        the scope of what a single static page can hope to detect, but the approach here follows
        well-understood patterns from modern cryptography rather than inventing anything new.
      </p>
    </section>

    <!-- BACKGROUND / WHY YOU SHOULD TRUST THIS -->
    <section class="mb-5" aria-labelledby="background-heading">
      <h2 id="background-heading" class="h4 mb-3">My background and why I built this</h2>
      <p class="small text-secondary">
        I built this tool as part of a broader set of CyberAlex projects to make security concepts
        concrete and transparent. My background is in Computer Security and Cyber Security, Risk &
        Resilience, with formal study covering cryptography, secure software design, and how real
        attacks play out in practice rather than just in theory.
      </p>
      <p class="small text-secondary mb-0">
        The goal here is not to claim this page is a silver bullet, but to give you a clear,
        inspectable example of client-side file encryption done in a way that lines up with modern
        guidance. If you have ideas for improvements, want to sanity-check the approach, or would
        like to see other tools in this space, feel free to reach out via the contact link below.
      </p>
    </section>



     <!-- Standard bottom meta row: Questions / Change log / Share this tool -->
<section class="mb-5" aria-labelledby="meta-row-heading">
  <hr>
  <h2 id="meta-row-heading" class="visually-hidden">Questions, change log and sharing</h2>

  <div class="row g-4 align-items-stretch">
    <!-- QUESTIONS -->
    <div class="col-lg-4">
      <div class="questions-box h-100">
        <h3 class="h6 text-uppercase text-muted mb-2">Questions</h3>
        <p class="small text-secondary mb-1">
          If you have feedback, spot an issue, or want to suggest improvements
          to this page or tool, you’re welcome to get in touch.
        </p>
        <a href="/contact.html" class="btn btn-primary btn-sm mt-auto">Contact Alex</a>
      </div>
    </div>

    <!-- CHANGE LOG -->
    <div class="col-lg-4">
      <div class="questions-box h-100">
        <h3 class="h6 text-uppercase text-muted mb-2">Changes</h3>
        <p class="small text-secondary mb-1">
          A record of changes to this page. 
        </p>
        <ul class="small text-secondary mb-0">
          <li><strong>06-12-2025</strong> – Publication</li>
          <!--li><strong>xx-xx-20xx</strong> – Description of future update.</li-->
        </ul>
        <p class="small text-secondary text-muted">Dates are in UK format (day–month–year).</p>
      </div>
    </div>

    <!-- SHARE -->
    <div class="col-lg-4">
      <div class="share-card h-100">
        <h3 class="h6 text-uppercase text-muted mb-2">Share</h3>
        <p class="small text-secondary mb-2">
          If you’d like to share this page with someone else, you can use the short link below.
        </p>

        <div class="share-url-row mb-2">
          <span class="share-url-prefix">https://www.</span>
          <button class="share-url-main"
                  type="button"
                  data-share-url="https://www.zilchy.link/snake">
            <span class="share-url-text">zilchy.link/encrypt</span>
          </button>
        </div>

        <p class="small text-secondary share-status mb-2" aria-live="polite"></p>

        <p class="small text-secondary mb-0">
          Zilchy.link is my own open-source short-link service. Links are hand-curated, do not track or log users, and this one simply redirects back to this page.
        </p>
      </div>
    </div>
  </div>
</section>

  </main>

  <!-- Footer loaded via JS -->
  <footer id="site-footer" aria-label="Main site footer"></footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

  <!-- Layout loader -->
  <script src="/js/layout.js"></script>
<script>
  (function () {
    if (!window.crypto || !window.crypto.subtle) {
      var warn = document.createElement('p');
      warn.className = 'text-danger small';
      warn.textContent = 'Your browser does not support the Web Crypto API. ' +
        'The file encryption tool is not available.';
      var heading = document.getElementById('file-crypto-heading');
      heading && heading.parentNode.insertBefore(warn, heading.nextSibling);
      return;
    }

    var PBKDF2_ITERATIONS = 200000;    // Tune if needed
    var SALT_LENGTH = 16;              // bytes
    var IV_LENGTH = 12;                // bytes (AES-GCM recommended)

    var textEncoder = new TextEncoder();

    function deriveKeyFromPassword(password, salt) {
      var passwordBytes = textEncoder.encode(password);
      return crypto.subtle.importKey(
        'raw',
        passwordBytes,
        { name: 'PBKDF2' },
        false,
        ['deriveKey']
      ).then(function (baseKey) {
        return crypto.subtle.deriveKey(
          {
            name: 'PBKDF2',
            salt: salt,
            iterations: PBKDF2_ITERATIONS,
            hash: 'SHA-256'
          },
          baseKey,
          { name: 'AES-GCM', length: 256 },
          false,
          ['encrypt', 'decrypt']
        );
      });
    }

    function concatUint8Arrays() {
      var totalLength = 0;
      for (var i = 0; i < arguments.length; i++) {
        totalLength += arguments[i].length;
      }
      var result = new Uint8Array(totalLength);
      var offset = 0;
      for (var j = 0; j < arguments.length; j++) {
        result.set(arguments[j], offset);
        offset += arguments[j].length;
      }
      return result;
    }

    function downloadBlob(data, filename) {
      var blob = new Blob([data]);
      var url = URL.createObjectURL(blob);
      var a = document.createElement('a');
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }

    function handleEncryptSubmit(event) {
      event.preventDefault();

      var fileInput = document.getElementById('encrypt-file');
      var passwordInput = document.getElementById('encrypt-password');
      var confirmInput = document.getElementById('encrypt-password-confirm');
      var statusEl = document.getElementById('encrypt-status');

      statusEl.textContent = '';

      if (!fileInput.files || fileInput.files.length === 0) {
        statusEl.textContent = 'Please choose a file to encrypt.';
        return;
      }

      var file = fileInput.files[0];
      var password = passwordInput.value;
      var confirm = confirmInput.value;

      if (!password) {
        statusEl.textContent = 'Please enter a password.';
        return;
      }
      if (password !== confirm) {
        statusEl.textContent = 'Passwords do not match.';
        return;
      }

      statusEl.textContent = 'Encrypting… please wait.';

      var reader = new FileReader();
      reader.onerror = function () {
        statusEl.textContent = 'Error reading file.';
      };
      reader.onload = function (e) {
        var fileData = e.target.result;
        var salt = new Uint8Array(SALT_LENGTH);
        crypto.getRandomValues(salt);
        var iv = new Uint8Array(IV_LENGTH);
        crypto.getRandomValues(iv);

        deriveKeyFromPassword(password, salt)
          .then(function (key) {
            return crypto.subtle.encrypt(
              { name: 'AES-GCM', iv: iv },
              key,
              fileData
            );
          })
          .then(function (cipherBuffer) {
            var cipherBytes = new Uint8Array(cipherBuffer);
            var combined = concatUint8Arrays(salt, iv, cipherBytes);

            var outName = file.name + '.caenc';
            downloadBlob(combined, outName);
            statusEl.textContent = 'File encrypted. Download should start automatically.';
          })
          .catch(function (err) {
            console.error(err);
            statusEl.textContent = 'Encryption failed.';
          });
      };
      reader.readAsArrayBuffer(file);
    }

    function handleDecryptSubmit(event) {
      event.preventDefault();

      var fileInput = document.getElementById('decrypt-file');
      var passwordInput = document.getElementById('decrypt-password');
      var statusEl = document.getElementById('decrypt-status');

      statusEl.textContent = '';

      if (!fileInput.files || fileInput.files.length === 0) {
        statusEl.textContent = 'Please choose an encrypted (.caenc) file.';
        return;
      }

      var file = fileInput.files[0];
      var password = passwordInput.value;

      if (!password) {
        statusEl.textContent = 'Please enter the password.';
        return;
      }

      statusEl.textContent = 'Decrypting… please wait.';

      var reader = new FileReader();
      reader.onerror = function () {
        statusEl.textContent = 'Error reading file.';
      };
      reader.onload = function (e) {
        var data = new Uint8Array(e.target.result);

        if (data.length <= SALT_LENGTH + IV_LENGTH) {
          statusEl.textContent = 'File is too short or not in the expected format.';
          return;
        }

        var salt = data.slice(0, SALT_LENGTH);
        var iv = data.slice(SALT_LENGTH, SALT_LENGTH + IV_LENGTH);
        var cipherBytes = data.slice(SALT_LENGTH + IV_LENGTH);

        deriveKeyFromPassword(password, salt)
          .then(function (key) {
            return crypto.subtle.decrypt(
              { name: 'AES-GCM', iv: iv },
              key,
              cipherBytes
            );
          })
          .then(function (plainBuffer) {
            var originalName = file.name.replace(/\.caenc$/i, '');
            if (originalName === file.name) {
              originalName = 'decrypted-' + file.name;
            }
            downloadBlob(plainBuffer, originalName);
            statusEl.textContent = 'File decrypted. Download should start automatically.';
          })
          .catch(function (err) {
            console.error(err);
            statusEl.textContent = 'Decryption failed. The password may be incorrect or the file is corrupt.';
          });
      };
      reader.readAsArrayBuffer(file);
    }

    document.getElementById('encrypt-form').addEventListener('submit', handleEncryptSubmit);
    document.getElementById('decrypt-form').addEventListener('submit', handleDecryptSubmit);
  })();
</script>
</body>
</html>
